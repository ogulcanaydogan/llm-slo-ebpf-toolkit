name: cpu_throttle
description: >
  Simulates CPU contention through CFS throttling and elevated steal time.
  Models noisy-neighbor VM scenarios or container resource limit hits that
  increase scheduler run-queue delay and degrade inference throughput.

fault_profile:
  runqueue_delay_ms: 28
  cpu_steal_pct: 9
  cfs_throttled_ms: 170
  dns_latency_ms: 12
  connect_latency_ms: 18

expected_impact:
  ttft_breach: false
  primary_signal: runqueue_delay_ms
  secondary_signals:
    - cpu_steal_pct
    - cfs_throttled_ms
  error_rate_elevated: true

harness:
  seed: 42
  load_profile: rag_mixed_20rps
  phases:
    baseline:
      duration: 10m
    fault:
      duration: 10m
    recovery:
      duration: 5m
  sample_count: 24
  repetitions: 10

assertions:
  - metric: llm_slo_tokens_per_sec_p50
    operator: "<"
    value: 15
    phase: fault
  - metric: cpu_steal_pct
    operator: ">"
    value: 5
    phase: fault
  - metric: runqueue_delay_ms_p95
    operator: ">"
    value: 20
    phase: fault
